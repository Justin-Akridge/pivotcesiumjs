import"./modulepreload-polyfill-B5Qt9EMX.js";document.getElementById("login-form").addEventListener("submit",async function(r){r.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("password").value;console.log(t),console.log(n);const s={email:t,password:n};try{const e=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok){const o=await e.json();localStorage.setItem("authToken",JSON.stringify(o.token)),localStorage.setItem("claims",JSON.stringify(o.claims)),(await fetch("/",{method:"GET",headers:{Authorization:`Bearer ${o.token}`}})).ok?window.location.href="/":document.getElementById("error-message").textContent="Error accessing home page."}else document.getElementById("error-message").textContent="Error logging in. Invalid email or password"}catch(e){console.error("An error occurred trying to log user in",e)}});
